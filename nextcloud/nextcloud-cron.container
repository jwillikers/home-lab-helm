[Unit]
Description=Nextcloud cron runner
Before=local-fs.target
After=nextcloud.service

[Container]
ContainerName=nextcloud-cron
Exec=./occ preview:pre-generate
Group=818
Image=docker.io/library/nextcloud:fpm
Label=io.containers.autoupdate=registry
PodmanArgs=--pod=nextcloud
Timezone=local
User=818
Volume=%h/container-volumes/nextcloud-nextcloud-app:/var/www/html:z
Volume=%h/container-volumes/nextcloud-nextcloud-config:/var/www/html/config:z
Volume=%h/container-volumes/nextcloud-nextcloud-custom-apps:/var/www/html/custom_apps:z
Volume=%h/container-volumes/nextcloud-nextcloud-data:/var/www/html/data:z
Volume=%h/Projects/nextcloud-config/docker-entrypoint-hooks.d/pre-installation:/docker-entrypoint-hooks.d/pre-installation:ro,z
Volume=%h/Projects/nextcloud-config/etc/php/conf.d/redis-session.ini:/usr/local/etc/php/conf.d/redis-session.ini:ro,z
Volume=%h/Projects/nextcloud-config/etc/php-fpm.d/z-www-overrides.conf:/usr/local/etc/php-fpm.d/z-www-overrides.conf:ro,z

[Service]
Restart=on-failure
